local Matrix = require("Matrix")

local TestCases = {
	-- {matrix, inverse}
	{
		Matrix.id(6),
		1,
	},
	{
		Matrix.new({ { 1, -1 }, { 3, 6 } }),
		9,
	},
	{
		Matrix.new({ { 2, 1, 1 }, { 4, 1, 0 }, { -2, 2, 1 } }),
		8,
	},
	{
		Matrix.new({ { 2, -1, 0, 0 }, { -1, 2, -1, 0 }, { 0, -1, 2, -1 }, { 0, 0, -1, 2 } }),
		5,
	},
	{
		Matrix.new({
			{ 3.5107, -8.89147, 3.61708, 4.11185, -2.66695 },
			{ 7.43312, 7.86211, 7.7262, -3.39287, -3.0052 },
			{ 1.62239, -0.123454, 9.14657, -9.7346, -5.92447 },
			{ -0.411015, 6.30865, -9.81425, 9.08249, -9.7718 },
			{ 0.292459, 0.00167841, 0.887809, -0.948112, 6.78176 },
		}),
		-4394.567355,
	},
	{
		Matrix.new({
			{ 1.71224, -1.32899, -1.81079, 3.66483, 5.3979 },
			{ -9.35084, 8.99521, -5.60999, -3.57916, 6.32232 },
			{ 4.00104, 8.82588, 5.1921, 9.38184, 3.02095 },
			{ 7.88995, -8.51654, 9.53526, -3.94674, 0.694414 },
			{ 6.24304, -9.99917, -5.79517, 9.96854, -5.4692 },
		}),
		-187.354731,
	},
	{
		Matrix.new({ { 1, 0, 0 }, { 0, 1, 0 }, { 0, 0, 0 } }),
		0,
	},
	{
		Matrix.new({ { 1, -2 }, { -3, 6 } }),
		0,
	},
	{
		Matrix.new({ { 1, 3, 1, 2 }, { 5, 8, 5, 3 }, { 0, 4, 0, 0 }, { 2, 3, 2, 8 } }),
		0,
	},
	{
		Matrix.new({
			{ 6.46966, 3.52818, 0.863428, 3.65923, 7.06105 },
			{ 6.31434, -1.97815, -0.806005, -0.725179, -1.02295 },
			{ -5.67316, -5.00583, -4.43587, 1.22875, 6.94048 },
			{ -9.01991, -9.06407, 3.70864, 9.84658, -3.03231 },
			{ -1.90907, -12.51987, -0.669807, 14.009381, 9.94627 },
		}),
		0,
	},
}

for _, testCase in TestCases do
	local matrix = testCase[1]
	local expectedDeterminant = testCase[2]
	local actualDeterminant = matrix:Determinant()

	print(matrix)
	print("Expected:", expectedDeterminant)
	print("Actual:", actualDeterminant)
	print("PASS: ", math.abs(expectedDeterminant - actualDeterminant) < 1e-4)
	print()
end
